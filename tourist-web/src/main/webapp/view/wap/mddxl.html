<!doctype html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <meta name="viewport"
          content="width=device-width,minimum-scale=1,user-scalable=no,maximum-scale=1,initial-scale=1"/>
    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <meta name="apple-mobile-web-app-status-bar-style" content="black"/>
    <meta name="format-detection" content="telephone=no"/>
    <meta name="description" content=""/>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <link rel="stylesheet" type="text/css" href="http://resali.huobanplus.com/cdn/jquery-weui/0.8.2/weui.min.css">
    <link rel="stylesheet" type="text/css"
          href="http://resali.huobanplus.com/cdn/jquery-weui/0.8.2/jquery-weui.min.css">
    <link rel="stylesheet" type="text/css" href="../../assets/css/weui.min-xzlx-diy.css">
    <title>下拉列表</title>
</head>

<body>
<div class="xzlx-hot">
    <div>
        <div class="dialog_mask mddDialog" style="display: none"></div>
        <div class="dialog_mask pxDialog" style="display: none"></div>
        <div class="dialog_mask hdlxDialog" style="display: none"></div>
        <div class="dialog_mask lxlxDialog" style="display: none"></div>
    </div>
    <div class="app-edit swiper-container boxhot">
        <div class="superli clearfix editing">
            <div class="control-group">
                <div class="hr_screen">
                    <div class="custom-paixu-A">
                        <div>
                            <span class="custom-paixu">
                                <a href="javascript:;" class="state_switch mdd"> 目的地<i class="icon_sort_single"></i>
                                </a>
                                <a href="javascript:;" class="state_switch px"> 排序<i class="icon_sort_single"></i>
                                </a>
                                <a href="javascript:;" class="state_switch hdlx"> 活动类型
                                    <i class="icon_sort_single"></i></a>
                                <a href="javascript:;" class="state_switch lxlx"> 路线类型
                                    <i class="icon_sort_single"></i></a>
                            </span>
                        </div>
                    </div>
                </div>
            </div>
            <!--/*@thymesVar id="destinationMaps" type="java.util.Map"*/-->
            <!--/*@thymesVar id="entry" type="java.util.Map.Entry<String,List<com.huotu.tourist.entity.Address>>"*/-->
            <!--/*@thymesVar id="address" type="com.huotu.tourist.entity.Address"*/-->
            <!--/*@thymesVar id="cityNameList" type="java.util.List<java.lang.String>"*/-->
            <!--/*@thymesVar id="activityIdList" type="java.util.List<java.lang.Integer>"*/-->
            <!--/*@thymesVar id="touristTypeIdList" type="java.util.List<java.lang.Long>"*/-->
            <!--/*@thymesVar id="sortsList" type="java.util.List<java.lang.Integer>"*/-->
            <div>
                <!--选择目的地-->
                <div style="display:none" class="mddContent">
                    <div class="control-group">
                        <div class="custom-tag-list clearfix"
                             style="margin-top: 0px;border: 1px solid #ddd;border-top: 0px;">
                            <div class="custom-tag-list-menu-block js-collection-region" style="min-height: 200px;">
                                <ul class="custom-tag-list-side-menu menu">
                                    <li class="current">
                                        <a href="javascript:;"><span>全部</span></a>
                                    </li>
                                    <li class="ad" th:each="entry:${destinationMaps.entrySet()}">
                                        <a href="javascript:;">
                                            <span th:text="${entry.key}">北京 </span>
                                        </a>
                                    </li>
                                    <li class="ad" th:remove="all"><a href="javascript:;"> <span>浙江</span> </a></li>
                                </ul>
                            </div>
                            <div class="custom-tag-list-goods destination"
                                 style="overflow:hidden;padding-bottom:10px; padding-top: 10px">
                                <ul class="ulxy" th:each="entry : ${destinationMaps.entrySet()}" data-province="浙江"
                                    th:attr="data-province=${entry.key}">
                                    <li class="ulli" th:each="address : ${entry.value}">
                                        <div class="ullidiv"
                                             th:class="${cityNameList.contains(address.town)?'ullidiv on':'ullidiv'}">
                                            <a
                                                    class="link js-goods clearfix">
                                                <div class="ullidd" data-value="西安"
                                                     th:attr="data-value=${address.town}"
                                                     th:text="${address.town}">
                                                    西安
                                                </div>
                                            </a>
                                        </div>
                                    </li>
                                    <li class="ulli" th:remove="all">
                                        <div class="ullidiv"><a
                                                class="link js-goods clearfix">
                                            <div class="ullidd" data-value="南京"> 南京</div>
                                        </a></div>
                                    </li>
                                    <li class="ulli" th:remove="all">
                                        <div class="ullidiv"><a
                                                class="link js-goods clearfix">
                                            <div class="ullidd" data-value="成都"> 成都</div>
                                        </a></div>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
                <!--选择排序-->
                <div style="display:none" class="pxContent">
                    <div class="control-group">
                        <div class="custom-tag-list clearfix"
                             style="margin-top: 0px;border: 1px solid #ddd;border-top: 0px;min-height: 200px;">
                            <div class="custom-tag-list-goods"
                                 style="overflow:hidden;padding-bottom:10px; padding-top: 10px">
                                <ul class="ulxy">
                                    <li class="ulli">
                                        <div class="ullidiv"
                                             th:class="${sortsList.contains(1)?'ullidiv on':'ullidiv'}">
                                            <a href="javascript: void(0);"
                                               class="link js-goods clearfix">
                                                <div class="ullidd" data-value="1"> 佣金比例最高</div>
                                            </a>
                                        </div>
                                    </li>
                                    <!--<li class="ulli">-->
                                    <!--<div class="ullidiv"-->
                                    <!--th:class="${sortsList.contains(2)?'ullidiv on':'ullidiv'}"><a-->
                                    <!--href="javascript: void(0);"-->
                                    <!--class="link js-goods clearfix">-->
                                    <!--<div class="ullidd" data-value="2"> 采购最多</div>-->
                                    <!--</a></div>-->
                                    <!--</li>-->
                                    <li class="ulli">
                                        <div class="ullidiv"
                                             th:class="${sortsList.contains(0)?'ullidiv on':'ullidiv'}"><a
                                                href="javascript: void(0);"
                                                                class="link js-goods clearfix">
                                            <div class="ullidd" data-value="0"> 最新发布</div>
                                        </a></div>
                                    </li>
                                </ul>

                            </div>
                        </div>
                    </div>
                </div>
                <!--活动类型-->
                <div style="display:none" class="hdlxContent">
                    <div class="control-group">
                        <div class="custom-tag-list clearfix"
                             style="margin-top: 0px;border: 1px solid #ddd;border-top: 0px;min-height: 200px;">
                            <div class="custom-tag-list-goods"
                                 style="overflow:hidden;padding-bottom:10px; padding-top: 10px">
                                <ul class="ulxy">
                                    <li class="ulli" th:each="activityType:${activityTypes}">
                                        <div class="ullidiv"
                                             th:class="${activityIdList.contains(activityType.id)?'ullidiv on':'ullidiv'}">
                                            <a href="javascript: void(0);" class="link js-goods clearfix">
                                                <div class="ullidd" data-value="1"
                                                     th:attr="data-value=${activityType.id}"
                                                     th:text="${activityType.activityName}">潜水
                                                </div>
                                            </a>
                                        </div>
                                    </li>
                                    <li class="ulli" th:remove="all">
                                        <div class="ullidiv"><a href="javascript: void(0);"
                                                                class="link js-goods clearfix">
                                            <div class="ullidd" data-value="2"> 爬山</div>
                                        </a></div>
                                    </li>
                                    <li class="ulli" th:remove="all">
                                        <div class="ullidiv"><a href="javascript: void(0);"
                                                                class="link js-goods clearfix">
                                            <div class="ullidd" data-value="3"> 滑雪</div>
                                        </a></div>
                                    </li>
                                </ul>

                            </div>
                        </div>
                    </div>
                </div>
                <!--线路类型-->
                <div style="display:none" class="lxlxContent">
                    <div class="control-group">
                        <div class="custom-tag-list clearfix"
                             style="margin-top: 0px;border: 1px solid #ddd;border-top: 0px;min-height: 200px;">
                            <div class="custom-tag-list-goods"
                                 style="overflow:hidden;padding-bottom:10px; padding-top: 10px">
                                <ul class="ulxy">
                                    <li class="ulli" th:each="touristType:${touristTypes}">
                                        <div class="ullidiv"
                                             th:class="${touristTypeIdList.contains(touristType.id)?'ullidiv on':'ullidiv'}">
                                            <a href="javascript: void(0);" class="link js-goods clearfix">
                                                <div class="ullidd" data-value="1"
                                                     th:attr="data-value=${touristType.id}"
                                                     th:text="${touristType.typeName}">长途
                                                </div>
                                            </a>
                                        </div>
                                    </li>
                                    <li class="ulli" th:remove="all">
                                        <div class="ullidiv">
                                            <a href="javascript: void(0);"
                                               class="link js-goods clearfix">
                                                <div class="ullidd" data-value="2">短途</div>
                                            </a>
                                        </div>
                                    </li>
                                </ul>

                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="weui_tab_bd" style="padding-bottom:0px;">
        <div class="mddxlTourist" style="padding-top: 50px">
            <a href="mddxlTourist.html" class="nextJScroll"
               th:href="@{/wap/mddxlTourist(offset=0,cityNames=${cityNames},sorts=${sorts},activityIds=${activityIds},touristTypeIds=${touristTypeIds})}">
                &nbsp;</a>
        </div>
    </div>

    <!--底部高度-->
    <p style="height: 80px; clear: both"></p>
    <!--底部导航-->
    <div class="weui_navbar daohangs">
        <a href="index.html" th:href="@{/wap/}" class="weui_navbar_item weui_bar_item_on">
            <p class="kimg dhshouyeicon"></p>
            <p>首页</p>
        </a>
        <a href="search.html" class="weui_navbar_item " th:href="@{/wap/showSearchView}">
            <p class="kimg dhsousuoicon"></p>
            <p>搜索</p>
        </a>
        <a href="my.html" class="weui_navbar_item" th:href="@{/wap/showMyInfo}">
            <p class="kimg dhwodeicon"></p>
            <p> 我的</p>
        </a>
    </div>

</div>

<script src="http://resali.huobanplus.com/cdn/jquery/2.2.4/jquery.min.js"></script>
<script src="http://resali.huobanplus.com/cdn/jquery-weui/0.8.2/jquery-weui.min.js"></script>
<script type="text/javascript" src="js/w/swiper.animate1.0.2.min.js"></script>
<script src="../../assets/js/jquery.jscroll.min.js"></script>
<script src="http://resali.huobanplus.com/cdn/jquery-weui/0.8.2/swiper.min.js"></script>
<script th:inline="javascript">
    $.touristUrl = /*[[@{/wap/mddxl}]]*/ 'mddxl.html';
</script>
<script>

    function bala(obj, dialogSelect, objContentSelect) {
        $(dialogSelect).toggle().siblings().hide();
        $(objContentSelect).toggle().siblings().hide();
        $(obj).toggleClass("on")
    }

    $('.mddxlTourist').jscroll({
        debug: true,
        nextSelector: 'a.nextJScroll:last',
        loadingHtml: '<div class="weui-infinite-scroll"><div class="infinite-preloader"></div>滑动加载更多</div>'
    });

    $(function () {
        $(".mdd").click(function () {
            bala($(this), ".mddDialog", ".mddContent");
        });
        $(".px").click(function () {
            bala($(this), ".pxDialog", ".pxContent");
        });
        $(".hdlx").click(function () {
            bala($(this), ".hdlxDialog", ".hdlxContent");
        });
        $(".lxlx").click(function () {
            bala($(this), ".lxlxDialog", ".lxlxContent");
        });

        $(".ulli").click(function () {
            $(this).find(".ullidiv").toggleClass("on");
            var cityNames = '';
            $(".destination ul .on ").each(function () {
                cityNames += $(this).find(".ullidd").attr("data-value") + ',';
            })
            var sorts = '';
            $(".pxContent ul .on ").each(function () {
                sorts += $(this).find(".ullidd").attr("data-value") + ',';
            });
            var activityIds = '';
            $(".hdlxContent ul .on ").each(function () {
                activityIds += $(this).find(".ullidd").attr("data-value") + ',';
            })
            var typeIds = '';
            $(".lxlxContent ul .on ").each(function () {
                typeIds += $(this).find(".ullidd").attr("data-value") + ',';
            });

            var url = $.touristUrl + "?cityNames=" + cityNames.substring(0, cityNames.length - 1)
                    + "&sorts=" + sorts.substring(0, sorts.length - 1) + "&activityIds=" + activityIds.substring(0, activityIds.length - 1)
                    + "&touristTypeIds=" + typeIds.substring(0, typeIds.length - 1);
            window.location.href = url;
        });

        $(".menu li").click(function () {
            $(this).addClass("current");
            $(this).siblings().removeClass("current");
            if ($(this).find("span").text().trim() == "全部") {
                $(".destination ul").show();
            } else {
                var text = $(this).find("span").text().trim();
                $(".destination ul").each(function () {
                    if ($(this).attr("data-province") == text) {
                        $(this).show();
                    } else {
                        $(this).hide();
                    }
                });
            }
        });
    })
</script>
</body>

</html>
